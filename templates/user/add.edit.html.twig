{% extends 'base.html.twig' %}

{% block title %}
    {% if app.request.get('_route') starts with 'backoffice_user_add' %}
    {{ parent() }} New User
    {% else %}
    {{ parent() }} Edit User
    {% endif %}
{% endblock %}

{% block body %}
<div class="container">
  {{ include('_partials/_nav.html.twig') }}
  {{ include('_partials/_flash_messages.html.twig') }}

  <h1> 
      {% if app.request.get('_route') starts with 'backoffice_user_add' %}
          New User
      {% else %}
          Edit {{ user.pseudo }}
      {% endif %}
  </h1>

  <div class="text-end">
  <a href="{{url('backoffice_user_browse')}}" class="btn btn-dark">Back to list</a>
  </div>
  
  <!--novalidate disable the html validation-->
  {{ form_start(user_form, {'attr': {'novalidate': 'novalidate'}}) }}

      <div class="form-group">
      {{ form_label(user_form.pseudo, null, {'label_attr': {'class': ' col-sm-1 control-label'}}) }}
        <div class="col-sm-10">
          {{ form_widget(user_form.pseudo, {'attr': {'class': 'form-control'}}) }}
          {{ form_errors(user_form.pseudo) }}
        </div>
      </div>
      <div class="form-group">
      {{ form_label(user_form.email, null, {'label_attr': {'class': ' col-sm-1 control-label'}}) }}
        <div class="col-sm-10">
          {{ form_widget(user_form.email, {'attr': {'class': 'form-control'}}) }}
          {{ form_errors(user_form.email) }}
        </div>
      </div>
      <div class="form-group">
      {{ form_label(user_form.password, null, {'label_attr': {'class': ' col-sm-1 control-label'}}) }}
        <div class="col-sm-10">
          {{ form_widget(user_form.password, {'attr': {'class': 'form-control'}}) }}
          {{ form_errors(user_form.password) }}
        </div>
      </div>
      <div class="form-group">
      {{ form_label(user_form.img, null, {'label_attr': {'class': ' col-sm-1 control-label'}}) }}
        <div class="col-sm-10">
          {{ form_widget(user_form.img, {'attr': {'class': 'form-control'}}) }}
          {{ form_errors(user_form.img) }}
        </div>
      </div>
      <div class="form-group">
      {{ form_label(user_form.roles, null, {'label_attr': {'class': ' col-sm-1 control-label'}}) }}
        <div class="col-sm-10">
          {{ form_widget(user_form.roles, {'attr': {'class': 'pr-2'}}) }}
          {{ form_errors(user_form.roles) }}
        </div>
      </div>

      <button type="submit" class="btn btn-primary mt-4">
      {% if 'backoffice_user_add' == app.request.get('_route') %}
      Add
      {% else %}
      Edit
      {% endif %}
      </button>
  {{ form_end(user_form) }} 

</div>
{% endblock %}